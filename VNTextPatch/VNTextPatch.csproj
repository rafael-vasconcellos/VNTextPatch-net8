<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net8.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <RuntimeIdentifiers>browser-wasm;win-x64;linux-x64;osx-x64</RuntimeIdentifiers>
  </PropertyGroup>
  
  <!-- Configurações específicas para WebAssembly -->
  <PropertyGroup Condition="'$(RuntimeIdentifier)' == 'browser-wasm'">
    <WasmAppDir>$(OutputPath)MyAppBundle</WasmAppDir>

    <UseAppHost>false</UseAppHost>
    <WasmGenerateRunV8Script>false</WasmGenerateRunV8Script>
    <!-- <WasmMainJSPath>wwwroot/main.js</WasmMainJSPath> -->
    <WasmEmitSymbolMap>false</WasmEmitSymbolMap>
    <WasmBuildOnlyAfterPublish>false</WasmBuildOnlyAfterPublish>
    <InvariantGlobalization>true</InvariantGlobalization>
    <WasmBuildNative>true</WasmBuildNative>
    <WasmNativeStrip>true</WasmNativeStrip>
    <WasmSingleFileBundle>true</WasmSingleFileBundle>
    <WasmEnableWebServer>true</WasmEnableWebServer>
    <WasmAllowUndefinedSymbols>true</WasmAllowUndefinedSymbols>
  </PropertyGroup>
  
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <Optimize>false</Optimize>
    <OutputPath>..\Build\Debug\</OutputPath>
  </PropertyGroup>
  
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <Optimize>true</Optimize>
    <OutputPath>..\Build\Release\</OutputPath>
  </PropertyGroup>
  

  <ItemGroup>
    <WasmExtraFilesToDeploy Include="settings.xml" />
    <None Include="settings.xml">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <SubType>Designer</SubType>
    </None>
  </ItemGroup>
  
  <ItemGroup>
    <ProjectReference Include="..\VNTextPatch.Shared\VNTextPatch.Shared.csproj" />
  </ItemGroup>
  
  <ItemGroup>
    <PackageReference Include="System.Runtime.CompilerServices.Unsafe" Version="6.1.2" />
  </ItemGroup>
  
  <!-- Pacotes necessários para WebAssembly -->
  <ItemGroup Condition="'$(RuntimeIdentifier)' == 'browser-wasm'">
    <NativeFileReference Include="$(SkiaSharpStaticLibraryPath)\3.1.56\st\*.a" />
    <PackageReference Include="Microsoft.NET.Runtime.WebAssembly.Sdk" Version="8.0.10" />
  </ItemGroup>

</Project>